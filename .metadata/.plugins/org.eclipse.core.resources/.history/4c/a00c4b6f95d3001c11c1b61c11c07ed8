// automatically generated by Xtext
grammar fr.irisa.diverse.semanticadaptation.SemAdapt with fr.irisa.diverse.adaptivesemantics.AdaptSem

import "http://www.diverse-team.fr/semanticadaptation" 
import "http://www.diverse-team.fr/adaptivesemantics" as adaptivesemantics
import "http://www.eclipse.org/emf/2002/Ecore" as ecore

SemanticAdaptation returns SemanticAdaptation:
	model=Model
	semantics=Semantics
	imports+=Import*
	modules+=Module*;


Model returns adaptivesemantics::Model:
	'model' importURI=EString;
	
Semantics returns Semantics:
	'semantics' importURI=EString;

Import returns adaptivesemantics::Import:
	'import' importURI=EString "as" name=ID;
	
Module returns Module:
	(recursive?='recursive')? name=ID
	"{"
		(pointcuts+=Pointcut)*
		(adaptations+=Adaptation)*
	"}"	
;





Pointcut returns Pointcut:
	'match' structure=DefConfiguration
	('where' conditions+=Condition ( "," conditions+=Condition)* )?
;

DefConfiguration returns adaptivesemantics::DefConfiguration:
	concept=[ecore::EClassifier|FQN]
	"("
		(childs+=TermDef ("," childs+=TermDef)*)?
	")"
;

TermDef returns adaptivesemantics::TermDef:
	SymbolDef | DefConfiguration | ListDef
;




Condition returns adaptivesemantics::Condition:
	oclPredicate=EString
;









Adaptation returns Adaptation:
	Specialization | Before | After;







EString returns ecore::EString:
	STRING | ID;

FQN: ID ("." ID)*;
